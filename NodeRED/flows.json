[
    {
        "id": "528cc06553f9b5ce",
        "type": "tab",
        "label": "Common",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1549c8010dfcd079",
        "type": "tab",
        "label": "FoodFeeder",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "7bd713a06d7f8813",
        "type": "group",
        "z": "1549c8010dfcd079",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "1612ba83c48243be",
            "589f5f324322e5f3",
            "20739795f61ecd81",
            "e9327013460ddb85",
            "470fcc6957b18726"
        ],
        "x": 34,
        "y": 459,
        "w": 632,
        "h": 242
    },
    {
        "id": "0da11b948e9e5d7e",
        "type": "group",
        "z": "1549c8010dfcd079",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "85d76ec7b3468c36",
            "05cdabd1287caca3",
            "69fab0941b68c7c8",
            "a82654994aabc2a2",
            "ce9ed35ac9b011cd",
            "b540f8d48e09d36a",
            "cfe5d857f1669497"
        ],
        "x": 34,
        "y": 19,
        "w": 612,
        "h": 202
    },
    {
        "id": "f600e3a3cb6f2685",
        "type": "group",
        "z": "1549c8010dfcd079",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "01c0f8b35a97166c",
            "3080506fd91da25d",
            "1ee63dbbe4dd31cf",
            "68602e1a6a3b1c3e",
            "e3bc25c8482ac953",
            "72067711a955702c",
            "b4621ca4b5937db4"
        ],
        "x": 34,
        "y": 239,
        "w": 612,
        "h": 202
    },
    {
        "id": "52d114842179f52a",
        "type": "group",
        "z": "1549c8010dfcd079",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "96a6f7b4f5af05c3",
            "d053d6e0d4ced2c4",
            "076f427836dccfd1",
            "28752b8421fcd448",
            "8bbf50aa2c017bdc"
        ],
        "x": 34,
        "y": 719,
        "w": 632,
        "h": 242
    },
    {
        "id": "d2ee3139a7e61b3d",
        "type": "group",
        "z": "528cc06553f9b5ce",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "0dc1be12d7d38a88",
            "58ec2dede6d1225c",
            "c6baa6e6312c0d9e",
            "982eb7bf28e36178",
            "74858f5b2639a509"
        ],
        "x": 14,
        "y": 159,
        "w": 592,
        "h": 162
    },
    {
        "id": "b82a1102c6a74b90",
        "type": "group",
        "z": "528cc06553f9b5ce",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "9b0a3cdf42305eb7",
            "4c02651f440edecc",
            "7bb22dec22e21064",
            "ba26755bed9570f3",
            "d4504ee3a5531a19",
            "0536c8adbbd1d8aa"
        ],
        "x": 14,
        "y": 339,
        "w": 812,
        "h": 122
    },
    {
        "id": "9726222cd667f981",
        "type": "group",
        "z": "1549c8010dfcd079",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "0b5c54b940dc5e78",
            "c64e6f6da06c4d1d",
            "7d1b1708b0dbeea2",
            "f066b70f7423db29",
            "9ff3e36c94fc8483",
            "bf4abd4f6bd4702f",
            "d6074e42beba44f7",
            "9a0b6d4e19a0d3d4",
            "f76851bd02a5bb6f"
        ],
        "x": 704,
        "y": 19,
        "w": 1318,
        "h": 688
    },
    {
        "id": "ff65497e1d3efc93",
        "type": "group",
        "z": "1549c8010dfcd079",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "a595f69a97d23d3a",
            "09f529ee48762ab5"
        ],
        "x": 714,
        "y": 739,
        "w": 578,
        "h": 168
    },
    {
        "id": "dca577125e69c86b",
        "type": "group",
        "z": "1549c8010dfcd079",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "413e2dfa18a97f12",
            "e5cbb0fa8ea03233"
        ],
        "x": 714,
        "y": 919,
        "w": 578,
        "h": 168
    },
    {
        "id": "9a0b6d4e19a0d3d4",
        "type": "group",
        "z": "1549c8010dfcd079",
        "g": "9726222cd667f981",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "5b58def28c5773ab",
            "09d06466ea6064c5",
            "c7a7c4ea3cfcfb3c",
            "3efb3ced6b592270",
            "cb2f844e597f8b1e",
            "878759e0422c0e60"
        ],
        "x": 1184,
        "y": 159,
        "w": 812,
        "h": 202
    },
    {
        "id": "f76851bd02a5bb6f",
        "type": "group",
        "z": "1549c8010dfcd079",
        "g": "9726222cd667f981",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "9318b832c48d2580",
            "58ae79aabd592218",
            "598ff0f9f1dfaf9f",
            "edb4612ec2786b36",
            "14a9051fe8a61915",
            "7782def60a55f09a",
            "4f772935306108a6",
            "3a49716968c582d6"
        ],
        "x": 1184,
        "y": 379,
        "w": 692,
        "h": 302
    },
    {
        "id": "09f529ee48762ab5",
        "type": "group",
        "z": "1549c8010dfcd079",
        "g": "ff65497e1d3efc93",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "738af33efc317f50",
            "0d436cec2463019d",
            "11d76718f8958c4c"
        ],
        "x": 754,
        "y": 799,
        "w": 512,
        "h": 82
    },
    {
        "id": "e5cbb0fa8ea03233",
        "type": "group",
        "z": "1549c8010dfcd079",
        "g": "dca577125e69c86b",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "dab3183d91176ee9",
            "debcf96397bf7647",
            "facd466d6d5a91d8"
        ],
        "x": 754,
        "y": 979,
        "w": 512,
        "h": 82
    },
    {
        "id": "2e8af74d2f2573d3",
        "type": "group",
        "z": "528cc06553f9b5ce",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "5f47d0b0c2846352",
            "9adfc52fc655923a",
            "6195370cebc55429",
            "97736a76a4c4fceb",
            "ebfccd4db0d57da2"
        ],
        "x": 14,
        "y": 19,
        "w": 632,
        "h": 122
    },
    {
        "id": "cfc29aa6332ee951",
        "type": "tls-config",
        "name": "",
        "cert": "",
        "key": "",
        "ca": "",
        "certname": "",
        "keyname": "",
        "caname": "",
        "servername": "",
        "verifyservercert": false,
        "alpnprotocol": ""
    },
    {
        "id": "90fcd8de4a4abf8c",
        "type": "mqtt-broker",
        "name": "",
        "broker": "localhost",
        "port": "8883",
        "tls": "cfc29aa6332ee951",
        "clientid": "unused",
        "autoConnect": false,
        "usetls": true,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "1",
        "birthRetain": "true",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "1",
        "closeRetain": "true",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "1",
        "willRetain": "true",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "5f47d0b0c2846352",
        "type": "inject",
        "z": "528cc06553f9b5ce",
        "g": "2e8af74d2f2573d3",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 100,
        "wires": [
            [
                "97736a76a4c4fceb"
            ]
        ]
    },
    {
        "id": "9adfc52fc655923a",
        "type": "http request",
        "z": "528cc06553f9b5ce",
        "g": "2e8af74d2f2573d3",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "cfc29aa6332ee951",
        "persist": false,
        "proxy": "",
        "authType": "bearer",
        "senderr": false,
        "x": 410,
        "y": 100,
        "wires": [
            [
                "6195370cebc55429"
            ]
        ]
    },
    {
        "id": "6195370cebc55429",
        "type": "function",
        "z": "528cc06553f9b5ce",
        "g": "2e8af74d2f2573d3",
        "name": "SaveCid",
        "func": "global.set('mqtt-cid', JSON.parse(msg.payload).uuid);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "97736a76a4c4fceb",
        "type": "function",
        "z": "528cc06553f9b5ce",
        "g": "2e8af74d2f2573d3",
        "name": "LoadSettings",
        "func": "if (global.get('http-host')\n    && global.get('http-port')\n    && global.get('device-name')\n    && global.get('device-type')) {\n\n        msg.method = \"POST\";\n        msg.url = `https://${global.get('http-host')}:${global.get('http-port')}/device/${encodeURIComponent(global.get('device-name'))}/${global.get('device-type')}`;\n\n        node.send(msg);\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 100,
        "wires": [
            [
                "9adfc52fc655923a"
            ]
        ]
    },
    {
        "id": "ebfccd4db0d57da2",
        "type": "comment",
        "z": "528cc06553f9b5ce",
        "g": "2e8af74d2f2573d3",
        "name": "Load Local Settings",
        "info": "",
        "x": 130,
        "y": 60,
        "wires": []
    },
    {
        "id": "0dc1be12d7d38a88",
        "type": "debug",
        "z": "528cc06553f9b5ce",
        "g": "d2ee3139a7e61b3d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "broker",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 490,
        "y": 240,
        "wires": []
    },
    {
        "id": "58ec2dede6d1225c",
        "type": "function",
        "z": "528cc06553f9b5ce",
        "g": "d2ee3139a7e61b3d",
        "name": "ConnectMQTT",
        "func": "msg.action = \"connect\";\n\nconst CID = global.get('mqtt-cid');\nconst USERNAME = global.get('mqtt-uname');\n\nconst setting = {\n    \n    // Basic host setting\n    \"broker\": global.get('mqtt-broker'),\n    \"port\": global.get('mqtt-port'),\n    \"clientid\": CID,\n    \n    // Boolean setting\n    \"force\": true,\n    \n    // Birth setting\n    \"birthTopic\": `users/${USERNAME}/${CID}/conn`,\n    \"birthQos\": \"1\",\n    \"birthRetain\": \"true\",\n    \"birthPayload\": `Device connected`,\n    \n    // Close setting\n    \"closeTopic\": `users/${USERNAME}/${CID}/disconn`,\n    \"closeQos\": \"1\",\n    \"closeRetain\": \"true\",\n    \"closePayload\": `Device disconnected`,\n\n    // Will setting\n    \"willTopic\": `users/${USERNAME}/${CID}/error`,\n    \"willQos\": \"1\",\n    \"willRetain\": \"true\",\n    \"willPayload\": `Device disconnected unexpectedly`,\n};\n\nmsg.broker = setting;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 240,
        "wires": [
            [
                "c6baa6e6312c0d9e",
                "0dc1be12d7d38a88"
            ]
        ]
    },
    {
        "id": "c6baa6e6312c0d9e",
        "type": "mqtt out",
        "z": "528cc06553f9b5ce",
        "g": "d2ee3139a7e61b3d",
        "name": "MQTTSetup",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "90fcd8de4a4abf8c",
        "x": 490,
        "y": 280,
        "wires": []
    },
    {
        "id": "982eb7bf28e36178",
        "type": "complete",
        "z": "528cc06553f9b5ce",
        "g": "d2ee3139a7e61b3d",
        "name": "",
        "scope": [
            "6195370cebc55429"
        ],
        "uncaught": false,
        "x": 110,
        "y": 240,
        "wires": [
            [
                "58ec2dede6d1225c"
            ]
        ]
    },
    {
        "id": "74858f5b2639a509",
        "type": "comment",
        "z": "528cc06553f9b5ce",
        "g": "d2ee3139a7e61b3d",
        "name": "Setup MQTT",
        "info": "",
        "x": 110,
        "y": 200,
        "wires": []
    },
    {
        "id": "9b0a3cdf42305eb7",
        "type": "mqtt in",
        "z": "528cc06553f9b5ce",
        "g": "b82a1102c6a74b90",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "auto",
        "broker": "90fcd8de4a4abf8c",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 470,
        "y": 420,
        "wires": [
            [
                "ba26755bed9570f3"
            ]
        ]
    },
    {
        "id": "4c02651f440edecc",
        "type": "complete",
        "z": "528cc06553f9b5ce",
        "g": "b82a1102c6a74b90",
        "name": "",
        "scope": [
            "c6baa6e6312c0d9e"
        ],
        "uncaught": false,
        "x": 110,
        "y": 420,
        "wires": [
            [
                "7bb22dec22e21064"
            ]
        ]
    },
    {
        "id": "7bb22dec22e21064",
        "type": "function",
        "z": "528cc06553f9b5ce",
        "g": "b82a1102c6a74b90",
        "name": "DynSubscribe",
        "func": "const uname = global.get('mqtt-uname');\nconst cid = global.get('mqtt-cid');\n\nmsg.action = \"subscribe\";\nmsg.topic = `users/${uname}/${cid}/action/#`;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 420,
        "wires": [
            [
                "9b0a3cdf42305eb7"
            ]
        ]
    },
    {
        "id": "ba26755bed9570f3",
        "type": "link out",
        "z": "528cc06553f9b5ce",
        "g": "b82a1102c6a74b90",
        "name": "Action MSG Event Out",
        "mode": "link",
        "links": [
            "0b5c54b940dc5e78"
        ],
        "x": 575,
        "y": 420,
        "wires": []
    },
    {
        "id": "d4504ee3a5531a19",
        "type": "comment",
        "z": "528cc06553f9b5ce",
        "g": "b82a1102c6a74b90",
        "name": "Action MSG Event Out",
        "info": "",
        "x": 700,
        "y": 420,
        "wires": []
    },
    {
        "id": "0536c8adbbd1d8aa",
        "type": "comment",
        "z": "528cc06553f9b5ce",
        "g": "b82a1102c6a74b90",
        "name": "Subscribe Action",
        "info": "",
        "x": 120,
        "y": 380,
        "wires": []
    },
    {
        "id": "1612ba83c48243be",
        "type": "inject",
        "z": "1549c8010dfcd079",
        "g": "7bd713a06d7f8813",
        "name": "Every10Sec",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 540,
        "wires": [
            [
                "589f5f324322e5f3"
            ]
        ]
    },
    {
        "id": "589f5f324322e5f3",
        "type": "link call",
        "z": "1549c8010dfcd079",
        "g": "7bd713a06d7f8813",
        "name": "TODO: Bowl Measurement",
        "links": [
            "ce9ed35ac9b011cd"
        ],
        "timeout": "30",
        "x": 300,
        "y": 580,
        "wires": [
            [
                "20739795f61ecd81"
            ]
        ]
    },
    {
        "id": "20739795f61ecd81",
        "type": "function",
        "z": "1549c8010dfcd079",
        "g": "7bd713a06d7f8813",
        "name": "PrepareMQTTMSG",
        "func": "const uname = global.get('mqtt-uname');\nconst cid = global.get('mqtt-cid');\n\nmsg.topic = `users/${uname}/${cid}/scale/bowl`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 620,
        "wires": [
            [
                "e9327013460ddb85"
            ]
        ]
    },
    {
        "id": "e9327013460ddb85",
        "type": "mqtt out",
        "z": "1549c8010dfcd079",
        "g": "7bd713a06d7f8813",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "90fcd8de4a4abf8c",
        "x": 590,
        "y": 660,
        "wires": []
    },
    {
        "id": "470fcc6957b18726",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "7bd713a06d7f8813",
        "name": "Publish Bowl Scale",
        "info": "",
        "x": 150,
        "y": 500,
        "wires": []
    },
    {
        "id": "85d76ec7b3468c36",
        "type": "exec",
        "z": "1549c8010dfcd079",
        "g": "0da11b948e9e5d7e",
        "command": "echo 10",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "TODO: Load Scale Module",
        "x": 240,
        "y": 140,
        "wires": [
            [
                "05cdabd1287caca3"
            ],
            [
                "a82654994aabc2a2"
            ],
            [
                "69fab0941b68c7c8"
            ]
        ]
    },
    {
        "id": "05cdabd1287caca3",
        "type": "function",
        "z": "1549c8010dfcd079",
        "g": "0da11b948e9e5d7e",
        "name": "PrepareReturn",
        "func": "msg.payload = parseInt(msg.payload.trim());\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 100,
        "wires": [
            [
                "b540f8d48e09d36a"
            ]
        ]
    },
    {
        "id": "69fab0941b68c7c8",
        "type": "debug",
        "z": "1549c8010dfcd079",
        "g": "0da11b948e9e5d7e",
        "name": "StatusOK",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 180,
        "wires": []
    },
    {
        "id": "a82654994aabc2a2",
        "type": "debug",
        "z": "1549c8010dfcd079",
        "g": "0da11b948e9e5d7e",
        "name": "StatusError",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 470,
        "y": 140,
        "wires": []
    },
    {
        "id": "ce9ed35ac9b011cd",
        "type": "link in",
        "z": "1549c8010dfcd079",
        "g": "0da11b948e9e5d7e",
        "name": "Bowl Scale In",
        "links": [],
        "x": 75,
        "y": 140,
        "wires": [
            [
                "85d76ec7b3468c36"
            ]
        ]
    },
    {
        "id": "b540f8d48e09d36a",
        "type": "link out",
        "z": "1549c8010dfcd079",
        "g": "0da11b948e9e5d7e",
        "name": "Bowl Scale Return",
        "mode": "return",
        "links": [],
        "x": 605,
        "y": 100,
        "wires": []
    },
    {
        "id": "cfe5d857f1669497",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "0da11b948e9e5d7e",
        "name": "TODO: (Load Cell) Bowl Measurement",
        "info": "",
        "x": 210,
        "y": 60,
        "wires": []
    },
    {
        "id": "0b5c54b940dc5e78",
        "type": "link in",
        "z": "1549c8010dfcd079",
        "g": "9726222cd667f981",
        "name": "Action MSG Event Listener",
        "links": [
            "e0eb4acd7c5094aa",
            "ba26755bed9570f3"
        ],
        "x": 975,
        "y": 140,
        "wires": [
            [
                "7d1b1708b0dbeea2"
            ]
        ]
    },
    {
        "id": "9318b832c48d2580",
        "type": "link call",
        "z": "1549c8010dfcd079",
        "g": "f76851bd02a5bb6f",
        "name": "Bowl Scale",
        "links": [
            "ce9ed35ac9b011cd"
        ],
        "timeout": "30",
        "x": 1280,
        "y": 480,
        "wires": [
            [
                "598ff0f9f1dfaf9f",
                "14a9051fe8a61915"
            ]
        ]
    },
    {
        "id": "c64e6f6da06c4d1d",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "9726222cd667f981",
        "name": "Action MSG Event Listener",
        "info": "",
        "x": 840,
        "y": 140,
        "wires": []
    },
    {
        "id": "58ae79aabd592218",
        "type": "switch",
        "z": "1549c8010dfcd079",
        "g": "f76851bd02a5bb6f",
        "name": "IsFull",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "actionGoal",
                "vt": "msg"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1480,
        "y": 560,
        "wires": [
            [
                "c7a7c4ea3cfcfb3c"
            ],
            [
                "7782def60a55f09a"
            ]
        ]
    },
    {
        "id": "7d1b1708b0dbeea2",
        "type": "function",
        "z": "1549c8010dfcd079",
        "g": "9726222cd667f981",
        "name": "PrepareLoop",
        "func": "msg.actionGoal = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 160,
        "wires": [
            [
                "bf4abd4f6bd4702f",
                "c7a7c4ea3cfcfb3c"
            ]
        ]
    },
    {
        "id": "f066b70f7423db29",
        "type": "inject",
        "z": "1549c8010dfcd079",
        "g": "9726222cd667f981",
        "name": "TC: Inject Action Goal",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "10",
        "payloadType": "num",
        "x": 890,
        "y": 180,
        "wires": [
            [
                "7d1b1708b0dbeea2"
            ]
        ]
    },
    {
        "id": "598ff0f9f1dfaf9f",
        "type": "debug",
        "z": "1549c8010dfcd079",
        "g": "f76851bd02a5bb6f",
        "name": "Bowl Weight",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1480,
        "y": 480,
        "wires": []
    },
    {
        "id": "5b58def28c5773ab",
        "type": "function",
        "z": "1549c8010dfcd079",
        "g": "9a0b6d4e19a0d3d4",
        "name": "PrepareMQTTMSG",
        "func": "const uname = global.get('mqtt-uname');\nconst cid = global.get('mqtt-cid');\n\nmsg.topic = `users/${uname}/${cid}/error`;\nmsg.payload = \"Food container empty\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1660,
        "y": 280,
        "wires": [
            [
                "09d06466ea6064c5"
            ]
        ]
    },
    {
        "id": "09d06466ea6064c5",
        "type": "mqtt out",
        "z": "1549c8010dfcd079",
        "g": "9a0b6d4e19a0d3d4",
        "name": "Publish Error \"Food container empty\"",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "90fcd8de4a4abf8c",
        "x": 1820,
        "y": 320,
        "wires": []
    },
    {
        "id": "edb4612ec2786b36",
        "type": "mqtt out",
        "z": "1549c8010dfcd079",
        "g": "f76851bd02a5bb6f",
        "name": "Publish Error \"Food container stuck\"",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "90fcd8de4a4abf8c",
        "x": 1580,
        "y": 640,
        "wires": []
    },
    {
        "id": "14a9051fe8a61915",
        "type": "function",
        "z": "1549c8010dfcd079",
        "g": "f76851bd02a5bb6f",
        "name": "CountUnchanged",
        "func": "if(!msg.prev) {\n    msg.prev = msg.payload;\n}\n\nif(!msg.count) {\n    msg.count = 0;\n}\n\nif(Math.abs(msg.payload - msg.prev) < global.get('scale-error')) {\n    msg.count++;\n}\n\nif(msg.count < 10) {\n    msg.prev = msg.payload;\n\n    return [msg, null];\n} else {\n    msg.topic = `users/${global.get('mqtt-uname')}/${global.get('mqtt-cid')}/error`;\n    msg.payload = \"Food container stuck\";\n\n    return [null, msg];\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 600,
        "wires": [
            [
                "58ae79aabd592218"
            ],
            [
                "edb4612ec2786b36"
            ]
        ]
    },
    {
        "id": "9ff3e36c94fc8483",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "9726222cd667f981",
        "name": "Serve Food",
        "info": "",
        "x": 800,
        "y": 60,
        "wires": []
    },
    {
        "id": "bf4abd4f6bd4702f",
        "type": "link out",
        "z": "1549c8010dfcd079",
        "g": "9726222cd667f981",
        "name": "",
        "mode": "link",
        "links": [
            "0d436cec2463019d"
        ],
        "x": 1205,
        "y": 120,
        "wires": []
    },
    {
        "id": "d6074e42beba44f7",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "9726222cd667f981",
        "name": "Door Open Event Out",
        "info": "",
        "x": 1330,
        "y": 120,
        "wires": []
    },
    {
        "id": "7782def60a55f09a",
        "type": "link out",
        "z": "1549c8010dfcd079",
        "g": "f76851bd02a5bb6f",
        "name": "",
        "mode": "link",
        "links": [
            "debcf96397bf7647"
        ],
        "x": 1625,
        "y": 580,
        "wires": []
    },
    {
        "id": "4f772935306108a6",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "f76851bd02a5bb6f",
        "name": "Door Close Event Out",
        "info": "",
        "x": 1750,
        "y": 580,
        "wires": []
    },
    {
        "id": "01c0f8b35a97166c",
        "type": "exec",
        "z": "1549c8010dfcd079",
        "g": "f600e3a3cb6f2685",
        "command": "echo 10",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "TODO: Load Scale Module",
        "x": 240,
        "y": 360,
        "wires": [
            [
                "3080506fd91da25d"
            ],
            [
                "68602e1a6a3b1c3e"
            ],
            [
                "1ee63dbbe4dd31cf"
            ]
        ]
    },
    {
        "id": "3080506fd91da25d",
        "type": "function",
        "z": "1549c8010dfcd079",
        "g": "f600e3a3cb6f2685",
        "name": "PrepareReturn",
        "func": "msg.payload = parseInt(msg.payload.trim());\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 320,
        "wires": [
            [
                "72067711a955702c"
            ]
        ]
    },
    {
        "id": "1ee63dbbe4dd31cf",
        "type": "debug",
        "z": "1549c8010dfcd079",
        "g": "f600e3a3cb6f2685",
        "name": "StatusOK",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 400,
        "wires": []
    },
    {
        "id": "68602e1a6a3b1c3e",
        "type": "debug",
        "z": "1549c8010dfcd079",
        "g": "f600e3a3cb6f2685",
        "name": "StatusError",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 470,
        "y": 360,
        "wires": []
    },
    {
        "id": "e3bc25c8482ac953",
        "type": "link in",
        "z": "1549c8010dfcd079",
        "g": "f600e3a3cb6f2685",
        "name": "Container Scale In",
        "links": [],
        "x": 75,
        "y": 360,
        "wires": [
            [
                "01c0f8b35a97166c"
            ]
        ]
    },
    {
        "id": "72067711a955702c",
        "type": "link out",
        "z": "1549c8010dfcd079",
        "g": "f600e3a3cb6f2685",
        "name": "Container Scale Return",
        "mode": "return",
        "links": [],
        "x": 605,
        "y": 320,
        "wires": []
    },
    {
        "id": "b4621ca4b5937db4",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "f600e3a3cb6f2685",
        "name": "TODO: (Load Cell) Container Measurement",
        "info": "",
        "x": 220,
        "y": 280,
        "wires": []
    },
    {
        "id": "96a6f7b4f5af05c3",
        "type": "inject",
        "z": "1549c8010dfcd079",
        "g": "52d114842179f52a",
        "name": "Every10Sec",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 800,
        "wires": [
            [
                "d053d6e0d4ced2c4"
            ]
        ]
    },
    {
        "id": "d053d6e0d4ced2c4",
        "type": "link call",
        "z": "1549c8010dfcd079",
        "g": "52d114842179f52a",
        "name": "TODO: Container Measurement",
        "links": [
            "e3bc25c8482ac953"
        ],
        "timeout": "30",
        "x": 310,
        "y": 840,
        "wires": [
            [
                "076f427836dccfd1"
            ]
        ]
    },
    {
        "id": "076f427836dccfd1",
        "type": "function",
        "z": "1549c8010dfcd079",
        "g": "52d114842179f52a",
        "name": "PrepareMQTTMSG",
        "func": "const uname = global.get('mqtt-uname');\nconst cid = global.get('mqtt-cid');\n\nmsg.topic = `users/${uname}/${cid}/scale/container`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 880,
        "wires": [
            [
                "28752b8421fcd448"
            ]
        ]
    },
    {
        "id": "28752b8421fcd448",
        "type": "mqtt out",
        "z": "1549c8010dfcd079",
        "g": "52d114842179f52a",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "90fcd8de4a4abf8c",
        "x": 590,
        "y": 920,
        "wires": []
    },
    {
        "id": "8bbf50aa2c017bdc",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "52d114842179f52a",
        "name": "Publish Container Scale",
        "info": "",
        "x": 160,
        "y": 760,
        "wires": []
    },
    {
        "id": "c7a7c4ea3cfcfb3c",
        "type": "link call",
        "z": "1549c8010dfcd079",
        "g": "9a0b6d4e19a0d3d4",
        "name": "Container Scale",
        "links": [
            "e3bc25c8482ac953"
        ],
        "timeout": "30",
        "x": 1290,
        "y": 280,
        "wires": [
            [
                "3efb3ced6b592270",
                "cb2f844e597f8b1e"
            ]
        ]
    },
    {
        "id": "3efb3ced6b592270",
        "type": "switch",
        "z": "1549c8010dfcd079",
        "g": "9a0b6d4e19a0d3d4",
        "name": "IsEmpty",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lte",
                "v": "scale-thres",
                "vt": "flow"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1470,
        "y": 320,
        "wires": [
            [
                "5b58def28c5773ab"
            ],
            [
                "9318b832c48d2580"
            ]
        ]
    },
    {
        "id": "cb2f844e597f8b1e",
        "type": "debug",
        "z": "1549c8010dfcd079",
        "g": "9a0b6d4e19a0d3d4",
        "name": "Container Weight",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1500,
        "y": 240,
        "wires": []
    },
    {
        "id": "3a49716968c582d6",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "f76851bd02a5bb6f",
        "name": "Bowl Processing Logic",
        "info": "",
        "x": 1310,
        "y": 420,
        "wires": []
    },
    {
        "id": "878759e0422c0e60",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "9a0b6d4e19a0d3d4",
        "name": "Container Processing Logic",
        "info": "",
        "x": 1330,
        "y": 200,
        "wires": []
    },
    {
        "id": "738af33efc317f50",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "09f529ee48762ab5",
        "name": "Door Open Event Listener",
        "info": "",
        "x": 890,
        "y": 840,
        "wires": []
    },
    {
        "id": "0d436cec2463019d",
        "type": "link in",
        "z": "1549c8010dfcd079",
        "g": "09f529ee48762ab5",
        "name": "Door Open Event Listener",
        "links": [
            "bf4abd4f6bd4702f"
        ],
        "x": 1035,
        "y": 840,
        "wires": [
            [
                "11d76718f8958c4c"
            ]
        ]
    },
    {
        "id": "11d76718f8958c4c",
        "type": "debug",
        "z": "1549c8010dfcd079",
        "g": "09f529ee48762ab5",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 840,
        "wires": []
    },
    {
        "id": "dab3183d91176ee9",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "e5cbb0fa8ea03233",
        "name": "Door Close Event Listener",
        "info": "",
        "x": 890,
        "y": 1020,
        "wires": []
    },
    {
        "id": "debcf96397bf7647",
        "type": "link in",
        "z": "1549c8010dfcd079",
        "g": "e5cbb0fa8ea03233",
        "name": "Door Close Event Listener",
        "links": [
            "7782def60a55f09a"
        ],
        "x": 1035,
        "y": 1020,
        "wires": [
            [
                "facd466d6d5a91d8"
            ]
        ]
    },
    {
        "id": "facd466d6d5a91d8",
        "type": "debug",
        "z": "1549c8010dfcd079",
        "g": "e5cbb0fa8ea03233",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 1020,
        "wires": []
    },
    {
        "id": "a595f69a97d23d3a",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "ff65497e1d3efc93",
        "name": "TODO: Door Open",
        "info": "",
        "x": 830,
        "y": 780,
        "wires": []
    },
    {
        "id": "413e2dfa18a97f12",
        "type": "comment",
        "z": "1549c8010dfcd079",
        "g": "dca577125e69c86b",
        "name": "TODO: Door Close",
        "info": "",
        "x": 830,
        "y": 960,
        "wires": []
    }
]